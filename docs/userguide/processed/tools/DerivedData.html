<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><!-- InstanceBegin template="/Templates/mcv_guide.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<!-- InstanceBeginEditable name="doctitle" -->
<title>Derived Data</title>
<!-- InstanceEndEditable --><!-- InstanceBeginEditable name="head" -->
<!-- InstanceEndEditable -->
<link rel="stylesheet" href="/mcidas/doc/mcv_guide/mcidasv.css" charset="ISO-8859-1" type="text/css">
<!-- InstanceBeginEditable name="CurrentFile" -->
<script language="javascript" type="text/javascript">
function setParentPage() { if (parent.setPage) parent.setPage('tools/DerivedData.html',true); }
</script>
<!-- InstanceEndEditable -->
<style type="text/css">
<!--
.style1 {font-size: large;}
.style2 {font-size: small;}
-->
</style>
</head>
<body onLoad="setParentPage();">
<div class="TopTitleNav">
  <p class="style2" style="text-align:left; "> 
  	[<!-- InstanceBeginEditable name="GoToPrevious" --><a href="Formulas.html">Go to Previous</a><!-- InstanceEndEditable -->]
	<span style="padding-left: 15px; "> 
	[<!-- InstanceBeginEditable name="GoToNext" --><a href="NativeFormulas.html">Go to Next</a><!-- InstanceEndEditable -->] 
	</span> </p>
  <hr align="center">
</div>
<!-- InstanceBeginEditable name="MainContent" -->
<div class="pagetitle">Derived Data</div>
<p>McIDAS-V uses the formula mechanism to automatically create "derived" quantities based on the fields in a particular data source. When the data source is read in, the list of derived quantities is evaluated against the list of variables in the data. Users can define their own derived quantities by:</p>
<ul>
<li>Defining a McIDAS-V formula by name, description, and mathematical formula. This name can include the fields used to create the derived quantity by specifying %N#% to correspond to each D# specified in the formula. For example, the <strong>Description</strong> could be &quot;Difference (from %N1% &amp; %N2%). These N1 and N2 values correspond to the D1 and D2 values that can be entered into the <strong>Formula</strong>. For example, &quot;sub(D1, D2)&quot;.</li>
<li>Using special operators (D1, D2, ... DN) for the variable names.</li>
<li>Specifying the binding between the special operators and the parameters names or system aliases.</li>
<li>Saving the formula and loading or reloading a data source.</li>
</ul>
<p>See the <a href="Formulas.html">Formulas</a> section for an overview of creating McIDAS-V formulas.</p>
<p>To create a formula, select the <strong>Tools-&gt;Formulas-&gt;Create Formula</strong> menu item in the Main Display window.
This brings up the Formula Editor dialog box used to define a formula:</p>
<div class="images"><img src="images/formula/AddDerived1.gif" width="455" height="436" alt="Image 1: Settings Tab of the Formula Editor Dialog"><br>
<span class="caption">Image 1: Settings Tab of the Formula Editor Dialog</span></div>
<div class="pagesubtitle">Properties</div>
<ul class="propertylist">
  <li class="propertylistitem"><strong>Group -</strong> Sets the name of the directory in the <strong>Field Selector</strong> that the formula will be under. This is helpful to keep formulas organized.</li>
  <li class="propertylistitem"><strong>Displays -</strong> Sets which display types will be available to the user when the formula is evaluated.  By default, all displays are turned on.  Individual display types can be set by selecting <strong>Use selected</strong> and choosing specific display types in the panel at the bottom of the <strong>Settings</strong> tab.</li>
</ul>
<p>The <strong>Derived</strong> tab in the Formula
    Editor sets
the bindings between formula parameters and fields/aliases. </p>
<div class="images"><img src="images/formula/AddDerived2.gif" width="462" height="429" alt="Image 2: Derived Tab of the Formula Editor Dialog"><br>
<span class="caption">Image 2: Derived Tab of the Formula Editor Dialog</span></div>
<div class="pagesubtitle">Properties</div>
<ul class="propertylist">
  <li class="propertylistitem"><strong>For end user -</strong> Includes the formula in the list of formulas in the <strong>Field Selector</strong> tab of the Data Explorer.</li>
  <li class="propertylistitem"><strong>Create derived quantities -</strong> Adds the formula as a derived field if the data contains fields included in the <strong>Parameter Groups</strong> specified or match the specific <strong>Parameters</strong> defined in this tab.  In the case above, any time data with the TEMP, U, and V fields is added, this formula will list in the <strong>Fields</strong> panel of the <strong>Field Selector</strong> along with the data.  This keeps the user from having to go through the entire list of formulas.</li>
</ul>
<p>The parameters to be bound are denoted by operands D1, D2, D3, etc in the formula itself. Since these D* parameters are defined as TEMP, U, and V, McIDAS-V will automatically pull those fields from the data and evaluate the formula without requiring any user input. If you need user input, you can use other field names and the user will be prompted to supply those fields (e.g. the NDVI formula on the <a href="Formulas.html">Formulas</a> page would require the user to select the fields for NIR and R).</p>
<p>You can define the bindings for the operands using parameter groups or by specifying the parameters to use. Right clicking in the <strong>Parameter</strong> input
  field will pop up a menu that allows you to select system parameter aliases
 from fields loaded into McIDAS-V already.</p>
<p>Categories specify the types of data that are allowed in this formula. For example, in the image above, specifying a category of GRID-3D-* will tell McIDAS-V to only look at the 3D fields of TEMP, U, and V included with the data, not the 2D fields. Access the list by right clicking in the Categories input fields.</p>
<p>You can define specific output categories if the type of the data that the formula creates is different from the categories that the input operands require. In general, the output categories will be the same as the input categories. In the image above, if TEMP, U, and V had a category of GRID-3D-*, McIDAS-V will treat the field as a 3D grid. If you wish to treat this field as a 2D grid, clicking <img src="images/DefineOutputCategories.gif" width="193" height="26" alt="Define Output Categories button"align=absmiddle> allows for setting a category of GRID-2D-*. For more information on data categories, see the <a href="Formulas.html">Formulas</a> section.</p>
<p>To save the formula, click <img src="images/formula/AddFormulaButton.gif" alt="Add Formula button" width="105" height="26"align=absmiddle>. A new entry appears under Formulas in the <strong>Fields</strong> panel of the <strong>Field Selector</strong>. If you want to apply the formula to an existing data source, you need to reload that data source. Right click on the name of the data source in the <strong>Data
Sources</strong> panel of the <strong>Field Selector</strong> and select <strong>Reload
Data</strong>.</p>
<!-- InstanceEndEditable -->
<div class="BottomTitleNav">
  <hr align="center">
  <p class="style2" style="text-align:left; "> 
  	[<!-- InstanceBeginEditable name="GoToPrevious2" --><a href="Formulas.html">Go to Previous</a><!-- InstanceEndEditable -->] 
	<span style="padding-left: 15px; "> 
	[<!-- InstanceBeginEditable name="GoToNext2" --><a href="NativeFormulas.html">Go to Next</a><!-- InstanceEndEditable -->] 
	</span></p>
</div>
</body>
<!-- InstanceEnd --></html>
